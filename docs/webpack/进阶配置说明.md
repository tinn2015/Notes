[webpack进阶](https://juejin.im/post/5e6518946fb9a07c820fbaaf)

## 1. 静态资源拷贝

使用插件 CopyWebpackPlugin

这里注意的是 该插件6.0 以上配置参数改了， 参考官方仓库

## 2. 提供全局变量

webpack内置了一个ProvidePlugin  

添加的是全局变量， 注意命名污染。

必须在模块得环境中使用， 不是window下的。

## 3. 抽离css

上插件 mini-css-extract-plugin

压缩css optimize-css-assets-webpack-plugin

一种是直接使用

```javascript
plugins: [
  new OptimizeCssAssetsWebpackPlugin()
]
```

一种是：

```javascript
module.exports = {
  optimization: {
    minimizer: [
      new UglifyJsPlugin({
        cache: true,
        parallel: true,
        sourcMap: true
      }),
      new OptimizeCssAssetsPlugin({
        assetNameRegExp: /\.optimize\.css$/g,
        cssProcessor: require('cssnano'),
        cssProcessorOptions: { safe: true, discardComments: { removeAll: true } },
        canPrint: true
      }),
    ],
  }
}
```
## webpack实现按需加载

这个是通过手动import() 来实现的。

import 语法是通过 @babel/plugin-syntax-dynamic-import 插件支持的， 在我们的@babel/preset-env插件中已经内置

实现原理：

- webpack解析遇到import('xx')时，会以xx为入口生成新的chunk
- 当代码执行到import时才会，才会加载chunk对应的文件

## 热更新

- 首先配置 devServer 的 hot 为 true
- 并且在 plugins 中增加 new webpack.HotModuleReplacementPlugin()

## 多页应用

1. 修改入口文件entry
```javascript
entry: {
  index: './src/index.js',
  login: './src/login.js'
}
```

2. 修改output

```javascript
output: {
  path: path.resolve(__dirname, 'dist'),
  filename: '[name].[hash:6].js'
}
```
3. plugins添加新的HtmlWebpackPlugin

这里默认是 每个页面引入所有js

这里要注意的是HtmlWebpackPlugin配置有个chunks参数，可以将指定的js引入到指定的页面， 以此来做到多页的js文件分别加载。


